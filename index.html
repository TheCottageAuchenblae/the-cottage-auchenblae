<script>
  document.addEventListener('DOMContentLoaded', function () {
    // --- Airbnb iCal Fetch and Calendar Setup ---
    const proxyUrl = 'https://corsproxy.io/?';
    const icalUrl = 'https://www.airbnb.co.uk/calendar/ical/770028233462793407.ics?s=1119439d69cfa8e9c91961d6762542a6';

    fetch(proxyUrl + encodeURIComponent(icalUrl))
      .then(response => response.text())
      .then(data => {
        const jcalData = ICAL.parse(data);
        const comp = new ICAL.Component(jcalData);
        const vevents = comp.getAllSubcomponents('vevent');

        const events = vevents.map(vevent => {
          const event = new ICAL.Event(vevent);
          return {
            title: 'Booked',
            start: event.startDate.toJSDate(),
            end: event.endDate.toJSDate(),
            allDay: true,
            color: '#e60000'
          };
        });

        const calendarEl = document.getElementById('calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          height: 600,
          events: events
        });
        calendar.render();
      })
      .catch(error => {
        document.getElementById('calendar').innerHTML = '<p style="color: red;">Failed to load calendar.</p>';
        console.error('Calendar fetch error:', error);
      });

    // --- Hero Image Carousel Setup ---
    const heroImages = document.querySelectorAll('.hero-carousel img');
    let heroIndex = 0;

    function showImage(index) {
      heroImages.forEach(img => img.classList.remove('active'));
      heroImages[index].classList.add('active');
    }

    function nextImage() {
      heroIndex = (heroIndex + 1) % heroImages.length;
      showImage(heroIndex);
    }

    function prevImage() {
      heroIndex = (heroIndex - 1 + heroImages.length) % heroImages.length;
      showImage(heroIndex);
    }

    // Initial image display
    showImage(heroIndex);

    // Auto-scroll every 4 seconds
    setInterval(nextImage, 4000);

    // Navigation buttons
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    if (nextBtn && prevBtn) {
      nextBtn.addEventListener('click', nextImage);
      prevBtn.addEventListener('click', prevImage);
    }
  });
</script>
